{% extends "base.html" %}

{% block title %}Blog - Vuln-Web{% endblock %}

{% block content %}
<div class="blog-header">
    <h1>Blog Posts</h1>
    
    {% if session.user_id %}
        <a href="/blog/create" class="btn">Create Post</a>
    {% endif %}
    
    <form method="GET" action="/blog/search" class="search-form">
        <input type="text" name="q" placeholder="Search posts..." class="search-input">
        <button type="submit" class="btn btn-secondary">Search</button>
    </form>
    
    <div class="hint-box">
        <p>ðŸ’‰ SQL Injection in search: <code>' OR '1'='1</code></p>
    </div>
</div>

<div class="posts-grid">
    {% if posts %}
        {% for post in posts %}
        <div class="post-card">
            <h3><a href="/blog/{{ post.id }}">{{ post.title }}</a></h3>
            <p class="post-meta">By {{ post.username }} on {{ post.created_at }}</p>
            <div class="post-preview">
                {{ post.content[:150] }}...
            </div>
            <a href="/blog/{{ post.id }}" class="btn btn-small">Read More</a>
        </div>
        {% endfor %}
    {% else %}
        <p>No posts yet. Be the first to create one!</p>
    {% endif %}
</div>
{% endblock %}
